function economyResult(t){const e=$("#economy-search"),n=$("#economy-result");e.addClass("d-none"),n.removeClass("d-none"),$("#system-size").text(`${t.power} kW`),$("#energy-economy").text(`${toMoney(t.economy_value)} por ano`),$("#value-investment").text(toMoney(t.final_value)),$("#btn-economy-back").on("click",function(t){n.addClass("d-none"),e[0].reset(),avarageChange(),e.removeClass("d-none")})}function budget(t){const e=$("#economy-search"),n=$("#economy-result");e.addClass("d-none"),n.removeClass("d-none"),n.find("h4").text(t.total),$("#btn-economy-back").on("click",function(t){n.addClass("d-none"),e[0].reset(),e.removeClass("d-none")})}function validateFieldsRequired(t){let e=!0;return Array.from(t[0]).forEach(t=>{if(void 0!==t.required){let n=!0;try{n=$(t).parent().is(":visible")}catch(t){}t.required&&t.value.length<1&&n&&(t.classList.add("is-invalid"),t.addEventListener("change",()=>t.classList.remove("is-invalid")),t.addEventListener("keyup",()=>t.classList.remove("is-invalid")),e=!1)}}),e}function toMoney(t){try{return parseFloat(t).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}catch(e){return t}}$(document).ready(function(){toastr.options={positionClass:"md-toast-bottom-right",progressBar:!0,timeOut:4e3},function(t){t.fn.counter=function(){const e=t(this),n=parseInt(e.attr("data-from")),a=parseInt(e.attr("data-to")),o=a-n,s=o>0?10:0,r=parseInt(e.attr("data-time"));let c=n,i=10*o/r;var l;l=setInterval(()=>{c+=i,(s&&c>=a||!s&&c<=a)&&(c=a),this.text(parseInt(c)),c==a&&clearInterval(l)},10)}}(jQuery),$(".btn-submit").click(function(t){t.preventDefault();const e=$(this).closest(".ajax-form");if(!e)return console.log("Form not found"),!1;if(!validateFieldsRequired(e))return!1;const n=$(t.target),a=n.text();n.attr("data-loader")&&n.html('<i class="fa fa-spin fa-spinner mx-2"></i>'+n.attr("data-loader"));const o=new FormData(e[0]);$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({type:e.attr("method"),url:e.attr("action"),contentType:!1,processData:!1,data:o}).done(function(t){if(n.html(a),console.log(t),t.call_function&&"function"==typeof window[t.call_function])return window[t.call_function](t),n.html(a),!0;t.type&&t.message&&toastr[t.type](t.message),t.success&&e[0].reset()}).fail(function(t){n.html(a),console.log(t),t.message&&toastr[t.type](t.message)})})});
