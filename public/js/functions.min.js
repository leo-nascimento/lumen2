function economyResult(e){const t=$("#economy-search"),n=$("#economy-result");t.addClass("d-none"),n.removeClass("d-none"),$("#system-size").text(`${e.power} kW`),$("#energy-economy").text(`${toMoney(e.economy_value)} por ano`),$("#value-investment").text(toMoney(e.final_value)),$("#btn-economy-back").on("click",function(e){n.addClass("d-none"),t[0].reset(),avarageChange(),t.removeClass("d-none")})}function budget(e){const t=$("#economy-search"),n=$("#economy-result");t.addClass("d-none"),n.removeClass("d-none"),n.find("h4").text(e.total),$("#btn-economy-back").on("click",function(e){n.addClass("d-none"),t[0].reset(),t.removeClass("d-none")})}function validateFieldsRequired(e){let t=!0;return Array.from(e[0]).forEach(e=>{if(void 0!==e.required){let n=!0;try{n=$(e).parent().is(":visible")}catch(e){}e.required&&e.value.length<1&&n&&(e.classList.add("is-invalid"),e.addEventListener("change",()=>e.classList.remove("is-invalid")),e.addEventListener("keyup",()=>e.classList.remove("is-invalid")),t=!1)}}),t}function toMoney(e){try{return parseFloat(e).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}catch(t){return e}}function projectMobileCard(e){$("#residencial-mobile-content,#comercial-mobile-content,#rural-mobile-content,#condominio-mobile-content").addClass("d-none"),document.getElementById("project-mobile").className="",document.getElementById("project-mobile").className=e,document.getElementById(e+"-mobile-content").classList.remove("d-none")}$(document).ready(function(){toastr.options={positionClass:"md-toast-bottom-right",progressBar:!0,timeOut:4e3},function(e){e.fn.counter=function(){const t=e(this),n=parseInt(t.attr("data-from")),o=parseInt(t.attr("data-to")),a=o-n,s=a>0?10:0,r=parseInt(t.attr("data-time"));let c=n,i=10*a/r;var l;l=setInterval(()=>{c+=i,(s&&c>=o||!s&&c<=o)&&(c=o),this.text(parseInt(c)),c==o&&clearInterval(l)},10)}}(jQuery),$(".btn-submit").click(function(e){e.preventDefault();const t=$(this).closest(".ajax-form");if(!t)return console.log("Form not found"),!1;if(!validateFieldsRequired(t))return!1;const n=$(e.target),o=n.text();n.attr("data-loader")&&n.html('<i class="fa fa-spin fa-spinner mx-2"></i>'+n.attr("data-loader"));const a=new FormData(t[0]);$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({type:t.attr("method"),url:t.attr("action"),contentType:!1,processData:!1,data:a}).done(function(e){if(n.html(o),console.log(e),e.call_function&&"function"==typeof window[e.call_function])return window[e.call_function](e),n.html(o),!0;e.type&&e.message&&toastr[e.type](e.message),e.success&&t[0].reset()}).fail(function(e){n.html(o),console.log(e),e.message&&toastr[e.type](e.message)})})});
